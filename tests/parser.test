#!/bin/sh
cat <<EOF >input
algorithme procedure foo
debut
tant que (1 + 1) faire
  b <- 3
  c <- 4 + 4
fin tant que
a <- 2 * 3
b <- 3 + 4 * 5
c <- vrai <> faux ou b
d <- f(2 + 2, b et c, foo)
e <- "bla"
f <- ^c
g <- e[a + 5]
fin algorithme procedure foo
EOF

valgrind --leak-check=full --show-leak-kinds=all ./a2c input >out
cat <<EOF >exp
void foo(void)
{
while ((1 + 1)) {
b = 3;
c = (4 + 4);
}
a = (2 * 3);
b = (3 + (4 * 5));
c = (1 <> (0 || b));
d = f((2 + 2), (b && c), foo);
e = "bla";
f = *c;
g = e[(a + 5)];
}
EOF

diff exp out
